<!DOCTYPE html>


<head>
	<title>Tangent touch</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<link rel="shortcut icon" type="image/png" href="logo.png"/>
	<link rel="stylesheet" href="examples.css">
</head>


<body>
	<header>
		<h1>Tangent touch</h1>
		<h2>Sensing the orientation of target</h2>
		<h3><a href="https://boytchev.github.io/virtual-prosthetics/">Virtual Prosthetics Examples</a></h3>
	</header>
	
	<script type="module">

	//import * as Prosthetic from "./build/virtual-prosthetics.js";
	import * as Prosthetic from "./src/virtual-prosthetics.js";


	const PI = Math.PI;
	const sin = Math.sin;
	const cos = Math.cos;


	class CannonRobot extends Prosthetic.Robot
	{
		constructor( )
		{
			super( );
			
			this.partA = new Prosthetic.Phalange( 2, 0.6 );
			this.partB = new Prosthetic.Phalange( 1, 0.5 );
			this.partC = new Prosthetic.EndPhalange( 0.5, 0.2 );
			
			this.addChain(
				this,
				new Prosthetic.MotorZ( 0.1, -0.3, 0, 0.2, 0.3 ),
				new Prosthetic.MotorY( -1, 1, 0, 0.2, 0.1 ),
				this.partA,
				new Prosthetic.MotorZ( 0.0, -PI/2, 0, 0.25, 0.08 ),
				this.partB,
				new Prosthetic.MotorZ( 0.0, -PI/2, 0, 0.25, 0.08 ),
				this.partC,
			);
		}
	}


	// create 2 robots
	
	var robotA = new CannonRobot;
		robotA.setPosition( -3, 0, 0 );

	var robotB = new CannonRobot;
		robotB.setPosition( -1, 0, 0 );

	var robotC = new CannonRobot;
		robotC.setPosition( 1, 0, 0 );

	var robotD = new CannonRobot;
		robotD.setPosition( 3, 0, 0 );

	Prosthetic.setAnimation( loop );
	Prosthetic.setCameraPosition( 15, 8, 1*5 );


	var ball = new Prosthetic.Ball( 1 );
	Prosthetic.getScene().add( ball );
	Prosthetic.getScene().physics.addBody( ball.physics );
	ball.setPosition( 5.5, 1.01, 0 );


	function loop( t, dT )
	{
		t *=1.2;
		
		robotA.setAngle( 0, Math.sin(t) );
		robotA.setAngle( 1, 0.2*Math.sin(2*t) );
		robotA.setAngle( 2, -1.5*(1+Math.sin(t)) );
		robotA.setAngle( 3, -1.5*(1+Math.sin(t*5)) );

		t *= 0.8
		robotB.setAngle( 0, -1/3-1/3*Math.cos(t) );
		robotB.setAngle( 1, 0.2*Math.sin(2*t) );
		robotB.setAngle( 2, -1.5*(1+Math.cos(t)) );
		robotB.setAngle( 3, -1.5*(1+Math.cos(t*5)) );

		t *=1.1;
		
		robotC.setAngle( 0, Math.sin(t) );
		robotC.setAngle( 1, 0.2*Math.sin(2*t) );
		robotC.setAngle( 2, -1.5*(1+Math.sin(t)) );
		robotC.setAngle( 3, -1.5*(1+Math.sin(t*5)) );

		t *= 0.8
		robotD.setAngle( 0, -1/3-1/3*Math.cos(t) );
		robotD.setAngle( 1, 0.2*Math.sin(2*t) );
		robotD.setAngle( 2, -1.5*(1+Math.cos(t)) );
		robotD.setAngle( 3, -1.5*(1+Math.cos(t*5)) );
	}


	</script>
</body>
