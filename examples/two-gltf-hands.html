<!DOCTYPE html>


<head>
	<title>Two GLTF hands</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<link rel="shortcut icon" type="image/png" href="logo.png"/>
	<link rel="stylesheet" href="examples.css">
</head>


<body>
	<header>
		<h1>Two GLTF hands</h1>
		<h2>Prototype models of prosthetic GLTF hands</h2>
		<h3><a href="https://boytchev.github.io/virtual-prosthetics/">Virtual Prosthetics Examples</a></h3>
	</header>
	
	<script type="module">


	//import * as Prosthetic from "../build/virtual-prosthetics.js";
	import * as Prosthetic from "../src/virtual-prosthetics.js";


	const PI = Math.PI;
	const sin = Math.sin;
	const cos = Math.cos;



	class LeftHand extends Prosthetic.Robot
	{
		constructor( )
		{
			super( );
			
			var palm = new Prosthetic.LeftPalm( );
				palm.attachToSlot( this );
			
			this.spread0 = new Prosthetic.MotorX( -1, 1, 0, 0, 0 );
			this.spread1 = new Prosthetic.MotorX( -0.3, 0.3, 0, 0, 0 );
			this.spread2 = new Prosthetic.MotorX( -0.3, 0.3, 0, 0, 0 );
			this.spread3 = new Prosthetic.MotorX( -0.3, 0.3, 0, 0, 0 );
			this.spread4 = new Prosthetic.MotorX( -0.3, 0.3, 0, 0, 0 );
			
			this.addChain(
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ).attachToSlot( palm, 0 ),
					this.spread0,
					new Prosthetic.PhalangeAnthro( '../assets/gltf/phalange10x3.glb', 1.0 ),
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ),
					new Prosthetic.PhalangeAnthro( '../assets/gltf/phalange5x3.glb', 0.5 ),
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ),
					new Prosthetic.EndPhalangeAnthro( '../assets/gltf/endPhalange5x3.glb', 0.5 )
				);
			
			this.addChain( 
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ).attachToSlot( palm, 1 ),
					this.spread1,
					new Prosthetic.PhalangeAnthro( '../assets/gltf/phalange10x3.glb', 1.0 ),
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ),
					new Prosthetic.PhalangeAnthro( '../assets/gltf/phalange5x3.glb', 0.5 ),
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ),
					new Prosthetic.EndPhalangeAnthro( '../assets/gltf/endPhalange5x3.glb', 0.5 )
				);
			
			this.addChain( 
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ).attachToSlot( palm, 2 ),
					this.spread2,
					new Prosthetic.PhalangeAnthro( '../assets/gltf/phalange11x3.glb', 1.1 ),
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ),
					new Prosthetic.PhalangeAnthro( '../assets/gltf/phalange5x3.glb', 0.5 ),
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ),
					new Prosthetic.EndPhalangeAnthro( '../assets/gltf/endPhalange5x3.glb', 0.5 )
				);
			
			this.addChain( 
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ).attachToSlot( palm, 3 ),
					this.spread3,
					new Prosthetic.PhalangeAnthro( '../assets/gltf/phalange10x3.glb' ),
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ),
					new Prosthetic.PhalangeAnthro( '../assets/gltf/phalange5x3.glb', 0.5 ),
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ),
					new Prosthetic.EndPhalangeAnthro( '../assets/gltf/endPhalange5x3.glb', 0.5 )
				);
			
			this.addChain( 
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ).attachToSlot( palm, 4 ),
					this.spread4,
					new Prosthetic.PhalangeAnthro( '../assets/gltf/phalange8x3.glb', 0.8 ),
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ),
					new Prosthetic.PhalangeAnthro( '../assets/gltf/phalange5x3.glb', 0.5 ),
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ),
					new Prosthetic.EndPhalangeAnthro( '../assets/gltf/endPhalange5x3.glb', 0.5 )
				);
		}
		
	}


	class RightHand extends Prosthetic.Robot
	{
		constructor( )
		{
			super( );
			
			var palm = new Prosthetic.RightPalm( );
				palm.attachToSlot( this );
			
			this.spread0 = new Prosthetic.MotorX( -1, 1, 0, 0, 0 );
			this.spread1 = new Prosthetic.MotorX( -0.3, 0.3, 0, 0, 0 );
			this.spread2 = new Prosthetic.MotorX( -0.3, 0.3, 0, 0, 0 );
			this.spread3 = new Prosthetic.MotorX( -0.3, 0.3, 0, 0, 0 );
			this.spread4 = new Prosthetic.MotorX( -0.3, 0.3, 0, 0, 0 );

			this.addChain(
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ).attachToSlot( palm, 0 ),
					this.spread0,
					new Prosthetic.PhalangeAnthro( '../assets/gltf/phalange10x3.glb', 1.0 ),
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ),
					new Prosthetic.PhalangeAnthro( '../assets/gltf/phalange5x3.glb', 0.5 ),
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ),
					new Prosthetic.EndPhalangeAnthro( '../assets/gltf/endPhalange5x3.glb', 0.5 )
				);
			
			this.addChain( 
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ).attachToSlot( palm, 1 ),
					this.spread1,
					new Prosthetic.PhalangeAnthro( '../assets/gltf/phalange10x3.glb', 1.0 ),
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ),
					new Prosthetic.PhalangeAnthro( '../assets/gltf/phalange5x3.glb', 0.5 ),
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ),
					new Prosthetic.EndPhalangeAnthro( '../assets/gltf/endPhalange5x3.glb', 0.5 )
				);

			this.addChain( 
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ).attachToSlot( palm, 2 ),
					this.spread2,
					new Prosthetic.PhalangeAnthro( '../assets/gltf/phalange11x3.glb', 1.1 ),
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ),
					new Prosthetic.PhalangeAnthro( '../assets/gltf/phalange5x3.glb', 0.5 ),
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ),
					new Prosthetic.EndPhalangeAnthro( '../assets/gltf/endPhalange5x3.glb', 0.5 )
				);
			
			this.addChain( 
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ).attachToSlot( palm, 3 ),
					this.spread3,
					new Prosthetic.PhalangeAnthro( '../assets/gltf/phalange10x3.glb', 1.0 ),
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ),
					new Prosthetic.PhalangeAnthro( '../assets/gltf/phalange5x3.glb', 0.5 ),
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ),
					new Prosthetic.EndPhalangeAnthro( '../assets/gltf/endPhalange5x3.glb', 0.5 )
				);
			
			this.addChain(
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ).attachToSlot( palm, 4 ),
					this.spread4,
					new Prosthetic.PhalangeAnthro( '../assets/gltf/phalange8x3.glb', 0.8 ),
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ),
					new Prosthetic.PhalangeAnthro( '../assets/gltf/phalange5x3.glb', 0.5 ),
					new Prosthetic.MotorZ( 0, -PI/2, -PI/4, 0.2, 0.1 ),
					new Prosthetic.EndPhalangeAnthro( '../assets/gltf/endPhalange5x3.glb', 0.5 )
				);
		}
		
	}



	var A = new LeftHand( );

	var B = new RightHand( );

	Prosthetic.setCameraPosition( 4, 2, -10 );
	Prosthetic.setCameraTarget( 0, 1.5, 0 );
	Prosthetic.setAnimation( loop );

	function loop( t, dT )
	{
		t *= 3;
		
		var sin = Math.sin(t);


		for( var i=0; i<A.getDOF(); i++ )
		{
			A.setAngle( i, -PI/4*(1+sin) );
			B.setAngle( i, -PI/4*(1+sin) );
		}

			
		var s = 0.5-0.5*sin;

		A.spread0.setAngle( -s );
		A.spread1.setAngle( 0.3*s );
		A.spread2.setAngle( 0.1*s );
		A.spread3.setAngle( -0.1*s );
		A.spread4.setAngle( -0.3*s );

		B.spread0.setAngle( s );
		B.spread1.setAngle( -0.3*s );
		B.spread2.setAngle( -0.1*s );
		B.spread3.setAngle( 0.1*s );
		B.spread4.setAngle( 0.3*s );
		
		s = Math.sin( t+1.5 );
		A.setPosition( -2+0.3*s**3, 1+s, -2*s);
		B.setPosition( 2-0.3*s**3, 1.2+s, -2*s);
		
		s = 1+Math.sin( t+1.5 );
		A.setRotation( -Math.PI/3*s/2, -Math.PI/2*s/2,  Math.PI/4*s/2 );
		B.setRotation( -Math.PI/3*s/2, Math.PI/2*s/2, -Math.PI/4*s/2 );

	}


	</script>
</body>
