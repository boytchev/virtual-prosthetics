<!DOCTYPE html>


<head>
	<title>Simple robot</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<link rel="shortcut icon" type="image/png" href="logo.png"/>
	<link rel="stylesheet" href="examples.css">
</head>


<body>
	<header>
		<h1>GLTF robot</h1>
		<h2>A robot with body parts loaded from GLTF files</h2>
		<h3><a href="https://boytchev.github.io/virtual-prosthetics/">Virtual Prosthetics Examples</a></h3>
	</header>
	
	<script type="module">


	//import * as Prosthetic from "../build/virtual-prosthetics.js";
	import * as Prosthetic from "../src/virtual-prosthetics.js";


	const PI = Math.PI;
	const sin = Math.sin;
	const cos = Math.cos;


	class SimpleRobot extends Prosthetic.Robot
	{
		constructor( )
		{
			super( );
			
			this.addChain(
				this,
				new Prosthetic.MotorY( -Infinity, Infinity, 0, 0.6, 0.1 ),
				new Prosthetic.MotorZ( 0, -PI/2, 0, 0.34, 0.25 ),
				new Prosthetic.Phalange( ),
				new Prosthetic.MotorZ( 0, -PI/2, 0, 0.2, 0.12 ),
				new Prosthetic.Phalange( 0.5 ),
				new Prosthetic.MotorZ( 0, -PI/2, 0, 0.2, 0.12 ),
				new Prosthetic.EndPhalange( 0.5 ),
			);
		}
	}

	class SimpleRobotAnthro extends Prosthetic.Robot
	{
		constructor( )
		{
			super( );
			
			this.addChain(
				this,
				new Prosthetic.MotorY( -Infinity, Infinity, 0, 0.6, 0.1 ),
				new Prosthetic.MotorZ( 0, -PI/2, 0, 0.34, 0.25 ),
				new Prosthetic.PhalangeAnthro( '../assets/gltf/phalange10x3.glb' ),
				new Prosthetic.MotorZ( 0, -PI/2, 0, 0.2, 0.12 ),
				new Prosthetic.PhalangeAnthro( '../assets/gltf/phalange5x3.glb', 0.5 ),
				new Prosthetic.MotorZ( 0, -PI/2, 0, 0.2, 0.12 ),
				new Prosthetic.EndPhalangeAnthro( '../assets/gltf/endPhalange5x3.glb', 0.5 ),
			);
		}
	}


	var robot = new SimpleRobot;
		robot.setPosition( -0.29, 0, 0 );
		robot.setRotation( 0, Math.PI, 0 );
		
	var robotAnthro = new SimpleRobotAnthro;
		robotAnthro.setPosition( 0.29, 0, 0 );
	

	Prosthetic.setAnimation( loop );
	Prosthetic.setCameraPosition( 0, 2, 5 );

	function loop( t )
	{
		robot.setAngles( 
			PI/3*sin(t),
			-PI/4*(0.5 + 0.5*sin(2*t)),
			-PI/2*(0.5 + 0.5*sin(2*t-1)),
			-PI/2*(0.5 + 0.5*sin(2*t-2))
		);

		robotAnthro.setAngles( 
			PI/3*sin(t),
			-PI/4*(0.5 + 0.5*sin(2*t)),
			-PI/2*(0.5 + 0.5*sin(2*t-1)),
			-PI/2*(0.5 + 0.5*sin(2*t-2))
		);
	}


	</script>
</body>
