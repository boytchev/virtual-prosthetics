<!DOCTYPE html>


<body>
	<script type="module">

	import * as Prosthetic from "../build/virtual-prosthetics.js";

	class Digger extends Prosthetic.Robot
	{
		constructor( speed )
		{
			super( );
			
			this.speed = speed;
			this.attachChain(
				new Prosthetic.MotorZ( -0.7, 0.7, 0, 0.2, 0.6 ),
				new Prosthetic.EdgedFinger( 1, 1, 0.1 ),
				new Prosthetic.MotorZ( -1.6, 0, 0, 0.4, 0.3 ),
				new Prosthetic.EdgedFinger( 2 ),
				new Prosthetic.MotorZ( -1.6, 0, 0, 0.4, 0.2 ),
				new Prosthetic.EdgedFinger( 0.7, 0.1 ),
			);
		}
		
		dig( time )
		{
			time = time * this.speed;
			
			this.setAngles( 
				-0.7*Math.sin(time+3),
				-1.6*(0.5 + 0.5*Math.sin(time+1)),
				-1.6*(0.5 + 0.5*Math.sin(time))
			);
		}
	}
	
	
	var robotA = new Digger(2);
	var robotB = new Digger(3);
	var robotC = new Digger(4);

	robotA.setPosition( 0, 0, 1 );
	robotC.setPosition( 0, 0, -1 );
	
	Prosthetic.setAnimation( loop );

	function loop( t )
	{
		robotA.dig( t );
		robotB.dig( t );
		robotC.dig( t );
	}

	</script>
</body>
